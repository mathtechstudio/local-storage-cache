name: local_storage_cache_root
description: Monorepo workspace for local_storage_cache packages
publish_to: none

environment:
  sdk: '>=3.6.0 <4.0.0'
  flutter: ">=3.0.0"

workspace:
  - packages/local_storage_cache
  - packages/local_storage_cache_platform_interface
  - packages/local_storage_cache_android
  - packages/local_storage_cache_ios
  - packages/local_storage_cache_macos
  - packages/local_storage_cache_windows
  - packages/local_storage_cache_linux
  - packages/local_storage_cache_web

dev_dependencies:
  melos: ^7.0.0
  very_good_analysis: ^6.0.0

melos:
  name: local_storage_cache
  
  scripts:
    analyze:
      description: Analyze all packages
      run: melos exec -- flutter analyze
      
    format:
      description: Format all packages
      run: melos exec -- dart format .
      
    format:check:
      description: Check formatting of all packages
      run: melos exec -- dart format --set-exit-if-changed .
      
    test:
      description: Run tests in all packages
      run: melos exec --fail-fast --ignore="*_web" -- flutter test
      
    test:coverage:
      description: Run tests with coverage in all packages
      run: melos exec --fail-fast --ignore="*_web" -- flutter test --coverage
      
    clean:
      description: Clean all packages
      run: melos exec -- flutter clean
      
    get:
      description: Get dependencies for all packages
      run: melos exec -- flutter pub get
      
    upgrade:
      description: Upgrade dependencies for all packages
      run: melos exec -- flutter pub upgrade
      
    build:android:
      description: Build Android example app
      run: melos exec --scope="local_storage_cache" -- flutter build apk
      
    build:ios:
      description: Build iOS example app
      run: melos exec --scope="local_storage_cache" -- flutter build ios --no-codesign
      
    version:
      description: Version packages and generate changelogs
      run: melos version --all
      
    publish:
      description: Publish packages to pub.dev
      run: melos publish --no-dry-run
